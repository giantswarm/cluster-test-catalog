{
    "$schema": "http://json-schema.org/schema#",
    "$defs": {
        "api": {
            "type": "object",
            "title": "API",
            "description": "Group, version and kind",
            "readOnly": true,
            "group": {
                "type": "string",
                "title": "API group"
            },
            "version": {
                "type": "string",
                "title": "API version"
            },
            "kind": {
                "type": "string",
                "title": "API kind"
            }
        }
    },
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "metadata": {
            "type": "object",
            "title": "Metadata",
            "properties": {
                "description": {
                    "type": "string",
                    "title": "Cluster description",
                    "description": "User-friendly description of the cluster's purpose."
                },
                "name": {
                    "type": "string",
                    "title": "Cluster name",
                    "description": "Unique identifier, cannot be changed after creation.",
                    "readOnly": true
                },
                "organization": {
                    "type": "string",
                    "title": "Organization",
                    "description": "The name of organization that owns the cluster.",
                    "readOnly": true
                },
                "servicePriority": {
                    "type": "string",
                    "title": "Service priority",
                    "description": "The relative importance of this cluster.",
                    "$comment": "Defined in https://github.com/giantswarm/rfc/tree/main/classify-cluster-priority",
                    "enum": [
                        "highest",
                        "medium",
                        "lowest"
                    ],
                    "default": "highest"
                }
            },
            "required": [
                "description",
                "name",
                "organization",
                "servicePriority"
            ]
        },
        "connectivity": {
            "type": "object",
            "title": "Connectivity",
            "properties": {
                "network": {
                    "type": "object",
                    "title": "Network",
                    "properties": {
                        "pods": {
                            "type": "object",
                            "title": "Pods",
                            "properties": {
                                "cidrBlocks": {
                                    "type": "array",
                                    "title": "Pod subnets",
                                    "items": {
                                        "type": "string",
                                        "title": "Pod subnet",
                                        "description": "IPv4 address range for pods, in CIDR notation.",
                                        "examples": [
                                            "10.244.0.0/16"
                                        ]
                                    },
                                    "default": [
                                        "100.64.0.0/12"
                                    ],
                                    "maxItems": 1,
                                    "minItems": 1
                                }
                            }
                        },
                        "services": {
                            "type": "object",
                            "title": "Services",
                            "properties": {
                                "cidrBlocks": {
                                    "type": "array",
                                    "title": "Kubernetes Service subnets",
                                    "items": {
                                        "type": "string",
                                        "title": "Service subnet",
                                        "description": "IPv4 address range for kubernetes services, in CIDR notation.",
                                        "examples": [
                                            "172.31.0.0/16"
                                        ]
                                    },
                                    "default": [
                                        "172.31.0.0/16"
                                    ],
                                    "maxItems": 1,
                                    "minItems": 1
                                }
                            }
                        }
                    }
                }
            }
        },
        "internal": {
            "type": "object",
            "title": "Internal",
            "properties": {
                "paused": {
                    "type": "boolean",
                    "title": "Paused",
                    "default": false
                },
                "controlPlane": {
                    "type": "object",
                    "title": "Internal control plane configuration",
                    "properties": {
                        "resources": {
                            "type": "object",
                            "title": "Resources configuration",
                            "description": "GVK and other configuration for control plane resources.",
                            "properties": {
                                "controlPlane": {
                                    "type": "object",
                                    "title": "Control plane resource config",
                                    "properties": {
                                        "api": {
                                            "$ref": "#/$defs/api"
                                        }
                                    },
                                    "default": {
                                        "api": {
                                            "group": "controlplane.cluster.x-k8s.io",
                                            "version": "v1beta1",
                                            "kind": "KubeadmControlPlane"
                                        }
                                    },
                                    "required": [
                                        "api"
                                    ]
                                }
                            },
                            "required": [
                                "controlPlane"
                            ]
                        }
                    },
                    "required": [
                        "resources"
                    ]
                },
                "providerSpecific": {
                    "type": "object",
                    "title": "Internal provider specific configuration",
                    "properties": {
                        "resources": {
                            "type": "object",
                            "title": "Resources configuration",
                            "description": "GVK and other configuration for provider-specific infrastructure resources.",
                            "properties": {
                                "cluster": {
                                    "type": "object",
                                    "title": "Provider specific cluster resource",
                                    "properties": {
                                        "api": {
                                            "$ref": "#/$defs/api"
                                        }
                                    },
                                    "default":{
                                        "api": {
                                            "group": "infrastructure.cluster.x-k8s.io",
                                            "version": "v1beta1"
                                        }
                                    },
                                    "required": [
                                        "api"
                                    ]
                                }
                            },
                            "required": [
                                "cluster"
                            ]
                        }
                    },
                    "required": [
                        "resources"
                    ]
                }
            },
            "required":[
                "paused",
                "controlPlane",
                "providerSpecific"
            ]
        }
    }
}
